<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 1. STEALTH MODE: Make the page look like a harmless educational tool -->
    <title>Khan Academy | Free Online Courses, Lessons & Practice</title>
    <meta name="description" content="Learn for free about math, art, computer programming, economics, physics, chemistry, biology, medicine, finance, history, and more.">
    <link rel="icon" href="https://www.khanacademy.org/favicon.ico" type="image/x-icon">

    <style>
        /* This CSS makes the page look like Khan Academy to a quick glance */
        body { font-family: 'Lato', sans-serif; background: #f5f5f5; color: #333; margin: 0; }
        .header { background: #0a2f5a; color: white; padding: 10px 20px; }
        .content { padding: 20px; }
        #status { font-family: monospace; background: #e0e0e0; padding: 10px; border-radius: 4px; margin-top: 20px; }
        /* The real content is completely hidden */
        #real-content { display: none; }
    </style>
</head>
<body>

    <!-- 1. STEALTH MODE: The visible DOM is a decoy -->
    <div class="header">
        <h1>Khan Academy</h1>
    </div>
    <div class="content">
        <h2>Math: Algebra I</h2>
        <p>Studying linear equations and functions...</p>
        <div id="status">Initializing system...</div>
    </div>

    <!-- This is the "real" content the user sees, which we will inject later -->
    <div id="real-content">
        <h1>YOUR ACTUAL CONTENT</h1>
        <p>This is the content you are trying to hide. It is now injected into a clean, temporary DOM.</p>
    </div>

<script>
    (function() {
        'use strict';

        // --- 2. ANTI-TAMPERING: Protect our script ---
        // Make it very difficult to overwrite our functions or see our code.
        const statusEl = document.getElementById('status');
        const originalConsole = window.console;
        const ghostConsole = {
            log: (...args) => originalConsole.log('%c[GHOST]', 'color: #ff4757', ...args),
            warn: (...args) => originalConsole.warn('%c[GHOST]', 'color: #ffa502', ...args),
            error: (...args) => originalConsole.error('%c[GHOST]', 'color: #ff6348', ...args)
        };
        
        // --- 3. DYNAMIC BLOCKLIST: Fetch a fresh blocklist on load ---
        let BLOCKLIST = ['goguardian.com', 'gg-cdn.net'];
        // You could host a text file on GitHub with a list of domains and fetch it here.
        // fetch('https://[your-username].github.io/blocklist.txt').then(r => r.text()).then(text => BLOCKLIST = text.split('\n'));

        // --- 4. ADVANCED DOM CLOAKING: The Funhouse Mirror 2.0 ---
        // Instead of overriding properties, we create a fake DOM tree and intercept access.
        const cloakedDocument = {
            title: 'Khan Academy | Free Online Courses, Lessons & Practice',
            URL: 'https://www.khanacademy.org/math/algebra',
            querySelector: (selector) => document.querySelector(selector), // Return decoy elements
            querySelectorAll: (selector) => document.querySelectorAll(selector), // Return decoy elements
            body: document.body // Point to the visible, decoy body
        };

        // Intercept access to the global 'document' object
        // This is highly advanced and may not work against all isolation techniques,
        // but it's the most aggressive form of DOM cloaking.
        try {
            Object.defineProperty(window, 'document', {
                get: function() {
                    ghostConsole.log('Intercepted read of window.document. Returning cloaked version.');
                    return cloakedDocument;
                },
                set: function() {
                    // Prevent reassignment
                    ghostConsole.warn('Blocked attempt to overwrite window.document');
                }
            });
        } catch(e) {
            ghostConsole.error('Failed to override window.document. Isolation is too strong.', e);
        }
        
        // Intercept 'fetch' and 'XMLHttpRequest' as before, but with our new console
        const originalFetch = window.fetch;
        window.fetch = function(...args) {
            const [resource, config] = args;
            const url = resource.toString();
            if (BLOCKLIST.some(domain => url.includes(domain))) {
                ghostConsole.warn(`Blocked fetch request to: ${url}`);
                statusEl.textContent = 'System running. All checks passed.';
                return Promise.resolve(new Response('{"status": "ok"}', { status: 200, statusText: 'OK' }));
            }
            return originalFetch.apply(this, args);
        };
        
        const OriginalXHR = window.XMLHttpRequest;
        window.XMLHttpRequest = function() {
            const xhr = new OriginalXHR();
            const originalOpen = xhr.open;
            xhr.open = function(method, url, ...args) {
                if (BLOCKLIST.some(domain => url.includes(domain))) {
                    ghostConsole.warn(`Blocked XHR request to: ${url}`);
                    return;
                }
                originalOpen.apply(this, [method, url, ...args]);
            };
            return xhr;
        };

        // --- Final Step: Inject the real content for the user ---
        // We create a new, floating window that is not part of the main document body.
        const realContentEl = document.getElementById('real-content');
        const userWindow = document.createElement('div');
        userWindow.id = 'user-window';
        userWindow.style.cssText = `
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 999999; overflow: auto;
        `;
        userWindow.innerHTML = realContentEl.innerHTML;
        document.body.appendChild(userWindow);

        statusEl.textContent = 'System armed. Monitoring is now blind.';

    })();
</script>

</body>
</html>
